
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Command-line interface &#8212; Tax-Calculator</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'guide/cli';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Policy parameters" href="policy_params.html" />
    <link rel="prev" title="Python interface" href="python_interface.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/PSL.svg" class="logo__image only-light" alt="Tax-Calculator - Home"/>
    <script>document.write(`<img src="../_static/PSL.svg" class="logo__image only-dark" alt="Tax-Calculator - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Tax-Calculator
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../usage/starting.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/overview.html">Structural overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/data.html">Data for Tax-Calculator</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">User guide</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="python_interface.html">Python interface</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Command-line interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="policy_params.html">Policy parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="input_vars.html">Input variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="output_vars.html">Output variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="assumption_params.html">Assumption parameters</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../recipes/index.html">Recipes</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../recipes/recipe00.html">Basic Recipe: Static Analysis of a Simple Reform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/recipe01.html">Recipe 1: Directly Comparing Two Reforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/recipe02.html">Recipe 2: Estimating Behavioral Response to Reform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/recipe03.html">Recipe 3: Creating a Custom Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/recipe04.html">Recipe 4: Estimating Differential Reform Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/recipe04_pandas.html">Recipe 4: Estimating Differential Reform Response - pandas version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/recipe05.html">Recipe 5: Redefining Expanded Income</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recipes/recipe06.html">Recipe 6: Analyzing a Non-Parametric Reform</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/tcja_after_2025.html">TCJA after 2025</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about/history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/releases.html">Release history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/LICENSE.html">License</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../contributing/contributor_guide.html">Contributor guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/pr_workflow.html">Pull request workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/param_naming.html">Policy parameter naming and placing conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/RELEASING.html">Releasing Tax-Caclculator Packages</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/public_api.html">Tax-Calculator Python API</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/calcfunctions.html">Tax-Calculator CalcFunctions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/calculator.html">Tax-Calculator Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/consumption.html">Tax-Calculator Consumption</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/data.html">Tax-Calculator Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/decorators.html">Tax-Calculator Decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/growdiff.html">Tax-Calculator GrowDiff</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/growfactors.html">Tax-Calculator GrowFactors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/parameters.html">Tax-Calculator Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/policy.html">Tax-Calculator Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/records.html">Tax-Calculator Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/taxcalcio.html">Tax-Calculator IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/utils.html">Tax-Calculator Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/utilsprvt.html">Tax-Calculator Private Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/calcfunctions.html">Tax-Calculator CalcFunctions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/calculator.html">Tax-Calculator Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/consumption.html">Tax-Calculator Consumption</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/data.html">Tax-Calculator Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/decorators.html">Tax-Calculator Decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/growdiff.html">Tax-Calculator GrowDiff</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/growfactors.html">Tax-Calculator GrowFactors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/parameters.html">Tax-Calculator Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/policy.html">Tax-Calculator Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/records.html">Tax-Calculator Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/taxcalcio.html">Tax-Calculator IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/utils.html">Tax-Calculator Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/utilsprvt.html">Tax-Calculator Private Utilities</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tax-Calculator use cases</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../use_cases.html">Recorded use cases</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/PSLmodels/Tax-Calculator" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/PSLmodels/Tax-Calculator/edit/master/docs/guide/cli.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/PSLmodels/Tax-Calculator/issues/new?title=Issue%20on%20page%20%2Fguide/cli.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/guide/cli.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Command-line interface</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-tc-cli">Test <code class="docutils literal notranslate"><span class="pre">tc</span></code> CLI</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specify-tax-reform">Specify tax reform</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specify-analysis-assumptions">Specify analysis assumptions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specify-filing-units">Specify filing units</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initiate-reform-analysis">Initiate reform analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tabulate-reform-results">Tabulate reform results</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-budget-window-results">Generate budget-window results</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="command-line-interface">
<h1>Command-line interface<a class="headerlink" href="#command-line-interface" title="Link to this heading">#</a></h1>
<p>You can use Tax-Calculator on your own computer via a command-line
interface (CLI) called <code class="docutils literal notranslate"><span class="pre">tc</span></code>.  This approach requires the use of a text
editor to prepare simple files that are read by <code class="docutils literal notranslate"><span class="pre">tc</span></code>.  Computer
programming knowledge is not required, but this approach to using
Tax-Calculator assumes you are willing to work at the command line
(Terminal on Mac or Anaconda Prompt on Windows) and to use a text
editor (for example, TextEdit on Mac or Notepad on Windows).</p>
<section id="test-tc-cli">
<h2>Test <code class="docutils literal notranslate"><span class="pre">tc</span></code> CLI<a class="headerlink" href="#test-tc-cli" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">tc</span></code> CLI is part of the Tax-Calculator <code class="docutils literal notranslate"><span class="pre">taxcalc</span></code> package you
installed on your computer as part of <a class="reference internal" href="../usage/starting.html"><span class="doc">Getting started</span></a>.</p>
<p>To check your installation of <code class="docutils literal notranslate"><span class="pre">tc</span></code>, enter the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">tc</span> <span class="o">--</span><span class="n">test</span>
</pre></div>
</div>
<p>Expected output (after several seconds) is <code class="docutils literal notranslate"><span class="pre">PASSED</span> <span class="pre">TEST</span></code>.  If you get
<code class="docutils literal notranslate"><span class="pre">FAILED</span> <span class="pre">TEST</span></code>, something went wrong in the installation process. If
the installation test fails, please report your experience by
<a class="reference external" href="https://github.com/PSLmodels/Tax-Calculator/issues">creating a new
issue</a>.</p>
<p>If your installation passes the test, you are ready to begin using
<code class="docutils literal notranslate"><span class="pre">tc</span></code> to analyze tax reforms. Continue reading this section for
information about how to do that. But if you want a quick hint about
the range of <code class="docutils literal notranslate"><span class="pre">tc</span></code> capabilities, enter the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">tc</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>The basic idea of <code class="docutils literal notranslate"><span class="pre">tc</span></code> tax analysis is that each tax reform is
specified in a text file using a simple method to describe the details
of the reform. Read the next part of this section to see how policy
reform files are formatted.</p>
</section>
<section id="specify-tax-reform">
<h2>Specify tax reform<a class="headerlink" href="#specify-tax-reform" title="Link to this heading">#</a></h2>
<p>The details of a tax reform are contained in a text file that you
write with a text editor. The reform is expressed by specifying which
tax policy parameters are changed from their current-law values by the
reform. The current-law values of each policy parameter are documented
in <a class="reference external" href="https://taxcalc.pslmodels.org/guide/policy_params.html#policy-parameters">this
section</a>
of the guide. The timing and magnitude of these policy parameter
changes are written in JSON, a simple and widely-used
data-specification language.</p>
<p>For several examples of reform files and the general rules for writing
JSON reform files, go to <a class="reference external" href="https://github.com/PSLmodels/Tax-Calculator/blob/master/taxcalc/reforms/README.md#policy-reform-files">this
page</a>.</p>
</section>
<section id="specify-analysis-assumptions">
<h2>Specify analysis assumptions<a class="headerlink" href="#specify-analysis-assumptions" title="Link to this heading">#</a></h2>
<p>This part explains how to specify economic assumption files used in
static tax analysis. This is an advanced topic, so if you want to
start out using the default assumptions (which are documented in <a class="reference external" href="https://taxcalc.pslmodels.org/guide/policy_params.html#policy-parameters">this
section</a>)
of the guide), you can skip this part now and come back to read it
whenever you want to change the default assumptions. The <a class="reference external" href="https://taxcalc.pslmodels.org/guide/cli.html#specify-filing-units">next
part</a>
of this section discusses filing-unit input files.</p>
<p>The details of analysis assumptions are contained in a text file that
you write with a text editor. The assumptions are expressed by
specifying which parameters are changed from their default values. The
timing and magnitude of these parameter changes are written in JSON, a
simple and widely-used data-specification language.</p>
<p>For examples of assumption files and the general rules for writing
JSON assumption files, go to <a class="reference external" href="https://github.com/PSLmodels/Tax-Calculator/blob/master/taxcalc/assumptions/README.md#economic-assumption-files">this
page</a>.</p>
</section>
<section id="specify-filing-units">
<h2>Specify filing units<a class="headerlink" href="#specify-filing-units" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">taxcalc</span></code> package containing <code class="docutils literal notranslate"><span class="pre">tc</span></code> does not include an
IRS-SOI-PUF-derived microsimulation sample. This is because, unlike
Census public-use files, the IRS-SOI Public Use File is
proprietary. If you or your organization has paid IRS to use the PUF
version being by Tax-Calculator, then it may be possible for us to
share with you one of our PUF-derived samples: the 2011-based  <code class="docutils literal notranslate"><span class="pre">puf.csv</span></code>
or the 2015-based <code class="docutils literal notranslate"><span class="pre">tmd.csv</span></code>, which are described in <a class="reference internal" href="../usage/data.html"><span class="doc">Data for Tax-Calculator</span></a>.
Otherwise, you have two choices.</p>
<p><strong>First</strong>, you can easily create with a text editor a CSV-formatted
file containing several filing units whose experience under your tax
reform is of interest to you. Much of the public discussion of tax
reforms is of this type: how is this family or that family affected by
a reform; how do they fare under different reforms; etc. The test
conducted to check the <code class="docutils literal notranslate"><span class="pre">tc</span></code> installation has left one such file. It is
called <code class="docutils literal notranslate"><span class="pre">test.csv</span></code> and contains two filing units: a lower income family
and a higher income family. You can use this <code class="docutils literal notranslate"><span class="pre">test.csv</span></code> file as <code class="docutils literal notranslate"><span class="pre">tc</span></code>
input to analyze your tax reforms. Before creating your own input
files be sure to read the short set of guidelines that appear after
this list of two choices. Some people pursue this approach using a
statistical pacakge like R or Stata, in which case the <code class="docutils literal notranslate"><span class="pre">tc</span></code> CLI
program can be invoked from within the statistical package. There may
be a need (especially on Windows) to <a class="reference external" href="https://github.com/PSLmodels/Tax-Calculator/issues/2273#issuecomment-479572287">add to the system
PATH</a>
in order to do this.</p>
<p><strong>Second</strong>, the <code class="docutils literal notranslate"><span class="pre">taxcalc</span></code> does include a freely available
microsimulation sample containing only filing units derived from a
recent March CPS survey. For several reasons, the results generated by
this <code class="docutils literal notranslate"><span class="pre">cps.csv</span></code> file are substantially different from the results
generated by the <code class="docutils literal notranslate"><span class="pre">puf.csv</span></code> or <code class="docutils literal notranslate"><span class="pre">tmd.csv</span></code> files. The <code class="docutils literal notranslate"><span class="pre">cps.csv</span></code> file
contains a sample of the population while the <code class="docutils literal notranslate"><span class="pre">puf.csv</span></code> and <code class="docutils literal notranslate"><span class="pre">tmd.csv</span></code>
files contain mostly a sample of income tax filers in which
high-income filing units are over represented. Also, the <code class="docutils literal notranslate"><span class="pre">cps.csv</span></code>
file has many income variables that are missing (and assumed to be
zero by Tax-Calculator), which causes an understating of total
incomes, especially for those with high incomes. All these differences
mean that the aggregate revenue and distributional results generated
when using the <code class="docutils literal notranslate"><span class="pre">cps.csv</span></code> file as input to Tax-Calculator can be
substantially different from the results generated when using the
<code class="docutils literal notranslate"><span class="pre">puf.csv</span></code> or <code class="docutils literal notranslate"><span class="pre">tmd.csv</span></code> file as input. And this is particularly true
when analyzing reforms that change the tax treatment of high-income
filers.</p>
<p><strong>Input-File-Preparation Guidelines</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">tc</span></code> CLI to Tax-Calculator is flexible enough to read almost any
kind of CSV-formatted input data on filing units as long as the
variable names correspond to those expected by Tax-Calculator. The
only required input variables are <code class="docutils literal notranslate"><span class="pre">RECID</span></code> (a unique filing-unit record
identifier) and <code class="docutils literal notranslate"><span class="pre">MARS</span></code> (a positive-valued filing-status
indicator). Other variables in the input file must have variable names
that are listed in the <a class="reference external" href="https://taxcalc.pslmodels.org/guide/input_vars.html">Input
Variables</a>
section for them to affect the tax calculations. Any variable listed
in Input Variables that is not in an input file is automatically set
to zero for every filing unit. Variables in the input file that are
not listed in Input Variables are ignored by Tax-Calculator.</p>
<p>However, there are important data-preparation issues related to the
fact that the payroll tax is a tax on individuals, not on income-tax
filing units. Tax-Calculator expects that the filing-unit total for
each of several earnings-related variables is split between the
taxpayer and the spouse. It is the responsibility of anyone preparing
data for Tax-Calculator input to do this earnings splitting. Here are
the relationships between the filing-unit variable and the taxpayer
(<code class="docutils literal notranslate"><span class="pre">p</span></code>) and spouse (<code class="docutils literal notranslate"><span class="pre">s</span></code>) variables expected by Tax-Calculator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e00200</span> <span class="o">=</span> <span class="n">e00200p</span> <span class="o">+</span> <span class="n">e00200s</span>
<span class="n">e00900</span> <span class="o">=</span> <span class="n">e00900p</span> <span class="o">+</span> <span class="n">e00900s</span>
<span class="n">e02100</span> <span class="o">=</span> <span class="n">e02100p</span> <span class="o">+</span> <span class="n">e02100s</span>
</pre></div>
</div>
<p>Obviously, when <code class="docutils literal notranslate"><span class="pre">MARS</span></code> is not equal to 2 (married filing jointly), the
values of the three <code class="docutils literal notranslate"><span class="pre">s</span></code> variables are zero and the value of each <code class="docutils literal notranslate"><span class="pre">p</span></code>
variable is equal to the value of its corresponding filing-unit
variable. Note that the input file can omit any one, or all, of these
three sets variables. If the three variables in one of these sets are
omitted, the required relationship will be satisfied because zero
equals zero plus zero.</p>
<p>In addition to this earnings-splitting data-preparation issue,
Tax-Calculator expects that the value of ordinary dividends (<code class="docutils literal notranslate"><span class="pre">e00600</span></code>)
will be no less than the value of qualified dividends (<code class="docutils literal notranslate"><span class="pre">e00650</span></code>) for
each filing unit. And it also expects that the value of total pension
and annuity income (<code class="docutils literal notranslate"><span class="pre">e01500</span></code>) will be no less than the value of
taxable pension and annuity income (<code class="docutils literal notranslate"><span class="pre">e01700</span></code>) for each filing
unit. Tax-Calculator also expects the value of the required MARS
variable to be in the range from one to five, and the value of the EIC
variable to be in the range from zero to three. Again, it is your
responsibility to prepare input data for Tax-Calculator in a way that
ensures these relationships are true for each filing unit.</p>
<p>Here’s an example of how to specify a few stylized filing units with
and without young children:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RECID</span><span class="p">,</span><span class="n">MARS</span><span class="p">,</span><span class="n">XTOT</span><span class="p">,</span><span class="n">EIC</span><span class="p">,</span><span class="n">n24</span><span class="p">,</span><span class="o">...</span>
    <span class="mi">11</span>   <span class="p">,</span>  <span class="mi">1</span> <span class="p">,</span>  <span class="mi">1</span> <span class="p">,</span> <span class="mi">0</span> <span class="p">,</span> <span class="mi">0</span> <span class="p">,</span><span class="o">...</span> <span class="o">&lt;==</span> <span class="n">single</span> <span class="n">person</span> <span class="k">with</span> <span class="n">no</span> <span class="n">kids</span>
    <span class="mi">12</span>   <span class="p">,</span>  <span class="mi">4</span> <span class="p">,</span>  <span class="mi">2</span> <span class="p">,</span> <span class="mi">1</span> <span class="p">,</span> <span class="mi">1</span> <span class="p">,</span><span class="o">...</span> <span class="o">&lt;==</span> <span class="n">single</span> <span class="n">person</span> <span class="k">with</span> <span class="n">a</span> <span class="n">young</span> <span class="n">kid</span>
    <span class="mi">13</span>   <span class="p">,</span>  <span class="mi">2</span> <span class="p">,</span>  <span class="mi">4</span> <span class="p">,</span> <span class="mi">2</span> <span class="p">,</span> <span class="mi">2</span> <span class="p">,</span><span class="o">...</span> <span class="o">&lt;==</span> <span class="n">married</span> <span class="n">couple</span> <span class="k">with</span> <span class="n">two</span> <span class="n">young</span> <span class="n">kids</span>
</pre></div>
</div>
<p>Be sure to read the documentation of the <code class="docutils literal notranslate"><span class="pre">MARS</span></code>, <code class="docutils literal notranslate"><span class="pre">XTOT</span></code>, <code class="docutils literal notranslate"><span class="pre">EIC</span></code>, and
<code class="docutils literal notranslate"><span class="pre">n24</span></code> input variables. Also, there may be a need to add other
child-age input variables if you want to simulate reforms like a child
credit bonus for young children. Also, the universal basic income
(UBI) reform is implemented using its own set of three age-group-count
input variables.</p>
<p>The name of your input data file is also relevant to how <code class="docutils literal notranslate"><span class="pre">tc</span></code> will
behave. If your file name ends with <code class="docutils literal notranslate"><span class="pre">cps.csv</span></code>, <code class="docutils literal notranslate"><span class="pre">puf.csv</span></code> or <code class="docutils literal notranslate"><span class="pre">tmd.csv</span></code>,
<code class="docutils literal notranslate"><span class="pre">tc</span></code> will automatically extrapolate your data from its base year to
the year you specify for tax calculations to be calculated using built
in growth factors, extrapolated weights, and other adjustment
factors. If you are not using the <code class="docutils literal notranslate"><span class="pre">cps.csv</span></code>, <code class="docutils literal notranslate"><span class="pre">puf.csv</span></code>, or <code class="docutils literal notranslate"><span class="pre">tmd.csv</span></code>
input, it is likely that your data will not be compatible with these
extrapolations and you should adopt filenames with alternative
endings.</p>
</section>
<section id="initiate-reform-analysis">
<h2>Initiate reform analysis<a class="headerlink" href="#initiate-reform-analysis" title="Link to this heading">#</a></h2>
<p>Executing <code class="docutils literal notranslate"><span class="pre">tc</span></code> requires at least three command-line arguments: the
name of an input file containing one or more filing units, the year
for which the tax calculations are done, and an option specifying what
kind of output is to be generated.  A baseline policy file is
optional; specifying no baseline file implies the baseline policy is
current-law policy. A policy reform file is optional; specifying no
reform file implies calculations are done for the baseline policy. An
economic assumption file is also optional; no assumption file implies
you want to use the default values of the assumption parameters. The
output files written by <code class="docutils literal notranslate"><span class="pre">tc</span></code> are built-up from the name of the input
file, tax year, baseline file, reform file, and assumption file using
a <code class="docutils literal notranslate"><span class="pre">#</span></code> character if an option is not specified.</p>
<p>Here we explain how to conduct tax analysis with <code class="docutils literal notranslate"><span class="pre">tc</span></code> by presenting a
series of examples and explaining what output is produced in each
example.  There are several types of output that <code class="docutils literal notranslate"><span class="pre">tc</span></code> can generate so
there will be more than a few examples.  All the examples assume that
the input file is the built-in <code class="docutils literal notranslate"><span class="pre">cps.csv</span></code> data sample and are conducted
on an old Mac with a slow Intel CPU chip.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">tc</span> <span class="n">cps</span><span class="o">.</span><span class="n">csv</span> <span class="mi">2020</span> <span class="o">--</span><span class="n">dumpdb</span>
<span class="n">Read</span> <span class="nb">input</span> <span class="n">data</span> <span class="k">for</span> <span class="mi">2014</span><span class="p">;</span> <span class="nb">input</span> <span class="n">data</span> <span class="n">were</span> <span class="n">extrapolated</span> <span class="n">to</span> <span class="mi">2020</span>
<span class="n">Write</span> <span class="n">dump</span> <span class="n">output</span> <span class="n">to</span> <span class="n">sqlite3</span> <span class="n">database</span> <span class="n">file</span> <span class="n">cps</span><span class="o">-</span><span class="mi">20</span><span class="o">-</span><span class="c1">#-#-#.db</span>
<span class="n">Execution</span> <span class="n">time</span> <span class="ow">is</span> <span class="mf">33.2</span> <span class="n">seconds</span>
</pre></div>
</div>
<p>The dump database contains 2020 income tax liabilities for each filing
unit under both baseline and reform policy regimes.  The name of the
dump database file is <code class="docutils literal notranslate"><span class="pre">cps-20-#-#-#.db</span></code>.  Because we did not use the
<code class="docutils literal notranslate"><span class="pre">--dumpvars</span></code> option, a minimal set of baseline/reform variables are
included in the dump database.</p>
<p>The main advantage of the SQLite3 database is that the
Anaconda Python distribution includes
<a class="reference external" href="https://www.sqlite.org/cli.html">sqlite3</a> (or sqlite3.exe on
Windows), a command-line tool that can be used to tabulate dump output
using structured query language (SQL). SQL is a language that you use
to specify the tabulation you want and the SQL database figures out
the procedure for generating your tabulation and then executes that
procedure; there is no computer programming involved.</p>
<p>To manipulate the dump database file, use the SQLite command-line
program (called <code class="docutils literal notranslate"><span class="pre">sqlite3.exe</span></code> on Windows or<code class="docutils literal notranslate"> <span class="pre">sqlite3</span></code> on other
operating systems), which is automatically installed as part of the
Anaconda Python distribution.  Full <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code> documentation is
<a class="reference external" href="https://sqlite.org/cli.html">here</a>.</p>
<p>Here is a quick way to see the structure of the dump database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">echo</span> <span class="s2">&quot;.schema&quot;</span> <span class="o">|</span> <span class="n">sqlite3</span> <span class="n">cps</span><span class="o">-</span><span class="mi">20</span><span class="o">-</span><span class="c1">#-#-#.db</span>
<span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">IF</span> <span class="n">NOT</span> <span class="n">EXISTS</span> <span class="s2">&quot;base&quot;</span> <span class="p">(</span>
<span class="s2">&quot;RECID&quot;</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="s2">&quot;s006&quot;</span> <span class="n">REAL</span><span class="p">,</span>
  <span class="s2">&quot;data_source&quot;</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="s2">&quot;XTOT&quot;</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="s2">&quot;MARS&quot;</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="s2">&quot;expanded_income&quot;</span> <span class="n">REAL</span><span class="p">,</span>
  <span class="s2">&quot;income_group&quot;</span> <span class="n">INTEGER</span>
<span class="p">);</span>
<span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">IF</span> <span class="n">NOT</span> <span class="n">EXISTS</span> <span class="s2">&quot;baseline&quot;</span> <span class="p">(</span>
<span class="s2">&quot;RECID&quot;</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="s2">&quot;iitax&quot;</span> <span class="n">REAL</span>
<span class="p">);</span>
<span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">IF</span> <span class="n">NOT</span> <span class="n">EXISTS</span> <span class="s2">&quot;reform&quot;</span> <span class="p">(</span>
<span class="s2">&quot;RECID&quot;</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="s2">&quot;iitax&quot;</span> <span class="n">REAL</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Notice that the dump output includes three relational database tables:
<code class="docutils literal notranslate"><span class="pre">base</span></code>, <code class="docutils literal notranslate"><span class="pre">baseline</span></code>, and <code class="docutils literal notranslate"><span class="pre">reform</span></code>.  The <code class="docutils literal notranslate"><span class="pre">base</span></code> tables contains baseline
values for variables that keep the same value when policy changes.
The <code class="docutils literal notranslate"><span class="pre">baseline</span></code> and <code class="docutils literal notranslate"><span class="pre">reform</span></code> tables can contain variables in addition
to <code class="docutils literal notranslate"><span class="pre">RECID</span></code> and <code class="docutils literal notranslate"><span class="pre">iitax</span></code> if the <code class="docutils literal notranslate"><span class="pre">--dumpvars</span></code> option is used.  For a
complete list of input variables, see the <a class="reference external" href="https://taxcalc.pslmodels.org/guide/input_vars.html">Input
Variables</a>
section. For a complete list of output variables, see the <a class="reference external" href="https://taxcalc.pslmodels.org/guide/output_vars.html">Output
Variables</a>
section.</p>
<p>There are several advantages to using a database file for dump output:
the database is much smaller than the equivalent CSV-formatted files,
and dump output can be tabulated using structured query language
(SQL). SQL is a language that you use to specify the tabulation you
want and the SQL database figures out the procedure for generating
your tabulation and then executes that procedure; there is no computer
programming involved.  We illustrate tabulation of dump output in a
<a class="reference internal" href="#cli-tab-results"><span class="xref myst">subsequent section</span></a>.</p>
<p>Next, we show how to generate tabular and graphical output for a
simple policy reform specified in the <code class="docutils literal notranslate"><span class="pre">ref3.json</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">ref3</span><span class="o">.</span><span class="n">json</span> <span class="n">raises</span> <span class="n">personal</span> <span class="n">exemption</span> <span class="n">amount</span> <span class="n">to</span> <span class="mi">8000</span> <span class="ow">in</span> <span class="mi">2022</span><span class="p">,</span>
<span class="o">//</span> <span class="n">after</span> <span class="n">which</span> <span class="n">it</span> <span class="n">continues</span> <span class="n">to</span> <span class="n">be</span> <span class="n">indexed</span> <span class="n">to</span> <span class="n">price</span> <span class="n">inflation</span><span class="o">.</span>
<span class="p">{</span>
    <span class="s2">&quot;II_em&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;2022&quot;</span><span class="p">:</span> <span class="mi">8000</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To get both tabular and graphical output, and to check on the policy
reform, we execute the following commands (note that on Windows you
should replace <code class="docutils literal notranslate"><span class="pre">cat</span></code> with <code class="docutils literal notranslate"><span class="pre">type</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">tc</span> <span class="n">cps</span><span class="o">.</span><span class="n">csv</span> <span class="mi">2024</span> <span class="o">--</span><span class="n">reform</span> <span class="n">ref3</span><span class="o">.</span><span class="n">json</span> <span class="o">--</span><span class="n">params</span> <span class="o">--</span><span class="n">tables</span> <span class="o">--</span><span class="n">graphs</span>
<span class="n">Read</span> <span class="nb">input</span> <span class="n">data</span> <span class="k">for</span> <span class="mi">2014</span><span class="p">;</span> <span class="nb">input</span> <span class="n">data</span> <span class="n">were</span> <span class="n">extrapolated</span> <span class="n">to</span> <span class="mi">2024</span>
<span class="n">Write</span> <span class="n">baseline</span> <span class="n">policy</span> <span class="n">parameter</span> <span class="n">values</span> <span class="n">to</span> <span class="n">file</span> <span class="n">cps</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="c1">#-ref3-#-params.bas</span>
<span class="n">Write</span> <span class="n">reform</span> <span class="n">policy</span> <span class="n">parameter</span> <span class="n">values</span> <span class="n">to</span> <span class="n">file</span> <span class="n">cps</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="c1">#-ref3-#-params.ref</span>
<span class="n">Write</span> <span class="n">tabular</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">cps</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="c1">#-ref3-#-tables.text</span>
<span class="n">Write</span> <span class="n">graphical</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">cps</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="c1">#-ref3-#-pch.html</span>
<span class="n">Write</span> <span class="n">graphical</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">cps</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="c1">#-ref3-#-atr.html</span>
<span class="n">Write</span> <span class="n">graphical</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">cps</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="c1">#-ref3-#-mtr.html</span>
<span class="n">Execution</span> <span class="n">time</span> <span class="ow">is</span> <span class="mf">37.3</span> <span class="n">seconds</span>

<span class="o">%</span> <span class="n">diff</span> <span class="n">cps</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="c1">#-ref3-#-params.bas cps-24-#-ref3-#-params.ref</span>
<span class="mi">34</span><span class="n">c34</span>
<span class="o">&lt;</span> <span class="n">II_em</span> <span class="mf">0.0</span>
<span class="o">---</span>
<span class="o">&gt;</span> <span class="n">II_em</span> <span class="mf">9059.7</span>

<span class="o">%</span> <span class="n">cat</span> <span class="n">cps</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="c1">#-ref3-#-tables.text</span>
<span class="n">Weighted</span> <span class="n">Tax</span> <span class="n">Reform</span> <span class="n">Totals</span> <span class="n">by</span> <span class="n">Baseline</span> <span class="n">Expanded</span><span class="o">-</span><span class="n">Income</span> <span class="n">Decile</span>
    <span class="n">Returns</span>    <span class="n">ExpInc</span>    <span class="n">IncTax</span>    <span class="n">PayTax</span>     <span class="n">LSTax</span>    <span class="n">AllTax</span>
       <span class="p">(</span><span class="c1">#m)      ($b)      ($b)      ($b)      ($b)      ($b)</span>
 <span class="mi">0</span>    <span class="mf">21.49</span>      <span class="mf">46.8</span>      <span class="o">-</span><span class="mf">1.0</span>       <span class="mf">3.6</span>       <span class="mf">0.0</span>       <span class="mf">2.6</span>
 <span class="mi">1</span>    <span class="mf">21.49</span>     <span class="mf">371.0</span>     <span class="o">-</span><span class="mf">11.5</span>      <span class="mf">31.8</span>       <span class="mf">0.0</span>      <span class="mf">20.4</span>
 <span class="mi">2</span>    <span class="mf">21.49</span>     <span class="mf">696.8</span>     <span class="o">-</span><span class="mf">12.3</span>      <span class="mf">49.9</span>       <span class="mf">0.0</span>      <span class="mf">37.6</span>
 <span class="mi">3</span>    <span class="mf">21.49</span>     <span class="mf">934.8</span>      <span class="o">-</span><span class="mf">1.9</span>      <span class="mf">55.4</span>       <span class="mf">0.0</span>      <span class="mf">53.5</span>
 <span class="mi">4</span>    <span class="mf">21.49</span>    <span class="mf">1177.8</span>       <span class="mf">4.8</span>      <span class="mf">78.4</span>       <span class="mf">0.0</span>      <span class="mf">83.2</span>
 <span class="mi">5</span>    <span class="mf">21.49</span>    <span class="mf">1486.0</span>      <span class="mf">15.3</span>     <span class="mf">105.4</span>       <span class="mf">0.0</span>     <span class="mf">120.6</span>
 <span class="mi">6</span>    <span class="mf">21.49</span>    <span class="mf">1893.5</span>      <span class="mf">32.0</span>     <span class="mf">136.6</span>       <span class="mf">0.0</span>     <span class="mf">168.7</span>
 <span class="mi">7</span>    <span class="mf">21.49</span>    <span class="mf">2465.2</span>      <span class="mf">74.8</span>     <span class="mf">194.6</span>       <span class="mf">0.0</span>     <span class="mf">269.4</span>
 <span class="mi">8</span>    <span class="mf">21.49</span>    <span class="mf">3392.4</span>     <span class="mf">176.0</span>     <span class="mf">295.6</span>       <span class="mf">0.0</span>     <span class="mf">471.6</span>
 <span class="mi">9</span>    <span class="mf">21.49</span>    <span class="mf">8037.6</span>    <span class="mf">1313.1</span>     <span class="mf">558.6</span>       <span class="mf">0.0</span>    <span class="mf">1871.7</span>
 <span class="n">A</span>   <span class="mf">214.88</span>   <span class="mf">20502.0</span>    <span class="mf">1589.2</span>    <span class="mf">1510.0</span>       <span class="mf">0.0</span>    <span class="mf">3099.2</span>

<span class="n">Weighted</span> <span class="n">Tax</span> <span class="n">Differences</span> <span class="n">by</span> <span class="n">Baseline</span> <span class="n">Expanded</span><span class="o">-</span><span class="n">Income</span> <span class="n">Decile</span>
    <span class="n">Returns</span>    <span class="n">ExpInc</span>    <span class="n">IncTax</span>    <span class="n">PayTax</span>     <span class="n">LSTax</span>    <span class="n">AllTax</span>
       <span class="p">(</span><span class="c1">#m)      ($b)      ($b)      ($b)      ($b)      ($b)</span>
 <span class="mi">0</span>    <span class="mf">21.49</span>      <span class="mf">46.8</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>
 <span class="mi">1</span>    <span class="mf">21.49</span>     <span class="mf">371.0</span>      <span class="o">-</span><span class="mf">2.1</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>      <span class="o">-</span><span class="mf">2.1</span>
 <span class="mi">2</span>    <span class="mf">21.49</span>     <span class="mf">696.8</span>      <span class="o">-</span><span class="mf">8.3</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>      <span class="o">-</span><span class="mf">8.3</span>
 <span class="mi">3</span>    <span class="mf">21.49</span>     <span class="mf">934.8</span>     <span class="o">-</span><span class="mf">10.0</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>     <span class="o">-</span><span class="mf">10.0</span>
 <span class="mi">4</span>    <span class="mf">21.49</span>    <span class="mf">1177.8</span>     <span class="o">-</span><span class="mf">14.5</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>     <span class="o">-</span><span class="mf">14.5</span>
 <span class="mi">5</span>    <span class="mf">21.49</span>    <span class="mf">1486.0</span>     <span class="o">-</span><span class="mf">22.4</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>     <span class="o">-</span><span class="mf">22.4</span>
 <span class="mi">6</span>    <span class="mf">21.49</span>    <span class="mf">1893.5</span>     <span class="o">-</span><span class="mf">33.0</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>     <span class="o">-</span><span class="mf">33.0</span>
 <span class="mi">7</span>    <span class="mf">21.49</span>    <span class="mf">2465.2</span>     <span class="o">-</span><span class="mf">45.0</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>     <span class="o">-</span><span class="mf">45.0</span>
 <span class="mi">8</span>    <span class="mf">21.49</span>    <span class="mf">3392.4</span>     <span class="o">-</span><span class="mf">74.3</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>     <span class="o">-</span><span class="mf">74.3</span>
 <span class="mi">9</span>    <span class="mf">21.49</span>    <span class="mf">8037.6</span>    <span class="o">-</span><span class="mf">121.7</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>    <span class="o">-</span><span class="mf">121.7</span>
 <span class="n">A</span>   <span class="mf">214.88</span>   <span class="mf">20502.0</span>    <span class="o">-</span><span class="mf">331.1</span>       <span class="mf">0.0</span>       <span class="mf">0.0</span>    <span class="o">-</span><span class="mf">331.1</span>
</pre></div>
</div>
<p>The graphs in the three <code class="docutils literal notranslate"><span class="pre">.html</span></code> files can be viewed in your browser.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cps-24-#-ref3-#-pch.html</span></code> file looks something like this:</p>
<p><img alt="pch graph" src="../_images/pch.png" /></p>
<p>The <code class="docutils literal notranslate"><span class="pre">cps-24-#-ref3-#-atr.html</span></code> file looks something like this:</p>
<p><img alt="atr graph" src="../_images/atr.png" /></p>
<p>The <code class="docutils literal notranslate"><span class="pre">cps-24-#-ref3-#-mtr.html</span></code> file looks something like this:</p>
<p><img alt="mtr graph" src="../_images/mtr.png" /></p>
<p>In all the examples in this section, we have executed one <code class="docutils literal notranslate"><span class="pre">tc</span></code> run at
at time.  But <strong>what if you want to execute many <code class="docutils literal notranslate"><span class="pre">tc</span></code> runs</strong> because
you want results for many years and/or for several different reforms.
The best way to execute multiple-year runs (say, ten-year runs to
generate budget-window estimates) is to use the <code class="docutils literal notranslate"><span class="pre">--numyears</span> <span class="pre">N</span></code> option
as decribed
<a class="reference external" href="https://github.com/PSLmodels/Tax-Calculator/pull/2900#issue-3047043290">here</a>
and below in the final section of this document.</p>
</section>
<section id="tabulate-reform-results">
<h2>Tabulate reform results<a class="headerlink" href="#tabulate-reform-results" title="Link to this heading">#</a></h2>
<p>Given the <a class="reference external" href="https://sqlite.org/mostdeployed.html">prevalence</a> of
SQLite, <code class="docutils literal notranslate"><span class="pre">tc</span></code> dump output can be tabulated using a wide range of
statistical software tools.  For example, a dump database file
can be directly manipulated in R or Python.</p>
<p>Here we give some examples of using the <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code> command-line program
that is part of the Anaconda distribution (so it is always available
when using Tax-Calculator).  The first step, of course, is to use the
<code class="docutils literal notranslate"><span class="pre">--dumpdb</span></code> option when running <code class="docutils literal notranslate"><span class="pre">tc</span></code>.  Then you can use the <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code>
tool interactively or use it to execute SQL scripts you have saved in
a text file.  We’ll provide examples of both those approaches.  There
are many online tutorials on the SQL select command; if you want to
learn more, search the Internet.</p>
<p>First, we provide a simple example of using <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code> interactively.
This approach is ideal for exploratory data analysis.  Our example
uses the <code class="docutils literal notranslate"><span class="pre">cps.csv</span></code> file as input, but you can do the following with
the output from any input file that has weights (<code class="docutils literal notranslate"><span class="pre">s006</span></code>).  Also, we
specify no policy reform file, so the output is for current-law
policy.  What you cannot see from the following record of the analysis
is that the <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code> tool keeps a command history, so pressing the
up-arrow key will bring up the prior command for editing.  This
feature reduces substantially the amount of typing required to conduct
exploratory data analysis.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">tc</span> <span class="n">cps</span><span class="o">.</span><span class="n">csv</span> <span class="mi">2024</span> <span class="o">--</span><span class="n">reform</span> <span class="n">ref3</span><span class="o">.</span><span class="n">json</span> <span class="o">--</span><span class="n">dumpdb</span>
<span class="n">Read</span> <span class="nb">input</span> <span class="n">data</span> <span class="k">for</span> <span class="mi">2014</span><span class="p">;</span> <span class="nb">input</span> <span class="n">data</span> <span class="n">were</span> <span class="n">extrapolated</span> <span class="n">to</span> <span class="mi">2024</span>
<span class="n">Write</span> <span class="n">dump</span> <span class="n">output</span> <span class="n">to</span> <span class="n">sqlite3</span> <span class="n">database</span> <span class="n">file</span> <span class="n">cps</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="c1">#-ref3-#.db</span>
<span class="n">Execution</span> <span class="n">time</span> <span class="ow">is</span> <span class="mf">35.6</span> <span class="n">seconds</span>

<span class="o">%</span> <span class="n">sqlite3</span> <span class="n">cps</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="c1">#-ref3-#.db</span>
<span class="n">SQLite</span> <span class="n">version</span> <span class="mf">3.39.5</span> <span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">14</span> <span class="mi">20</span><span class="p">:</span><span class="mi">58</span><span class="p">:</span><span class="mi">05</span>
<span class="n">Enter</span> <span class="s2">&quot;.help&quot;</span> <span class="k">for</span> <span class="n">usage</span> <span class="n">hints</span><span class="o">.</span>
<span class="n">sqlite</span><span class="o">&gt;</span> <span class="n">YOUR</span> <span class="n">FIRST</span> <span class="n">SQL</span> <span class="n">COMMAND</span> <span class="n">GOES</span> <span class="n">HERE</span>
<span class="n">sqlite</span><span class="o">&gt;</span> <span class="n">YOUR</span> <span class="n">SECOND</span> <span class="n">SQL</span> <span class="n">COMMAND</span> <span class="n">GOES</span> <span class="n">HERE</span>
<span class="n">sqlite</span><span class="o">&gt;</span> <span class="o">...</span>
<span class="n">sqlite</span><span class="o">&gt;</span> <span class="n">YOUR</span> <span class="n">FINAL</span> <span class="n">SQL</span> <span class="n">COMMAND</span> <span class="n">GOES</span> <span class="n">HERE</span>
<span class="n">sqlite</span><span class="o">&gt;</span> <span class="o">.</span><span class="n">quit</span>
</pre></div>
</div>
<p>Second, we provide a simple example of using <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code> with SQL
commands stored in a text file.  This approach is useful if you want
to tabulate many different output files in the same way.  This second
example assumes that the first example has already been done.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>% cat tab.sql
.mode column

.print *** unweighted and weighted tax unit counts:
SELECT
  COUNT(*)                 AS raw_count, -- unweighted count of tax units (#)
  ROUND(SUM(s006)*1e-6, 3) AS wgh_count  -- weighted count of tax units (#M)
from base;

.print *** weighted tax unit counts by filing status (MARS):
.width 4 -9
SELECT
  MARS,                                 -- tax filing status
  ROUND(SUM(s006)*1e-6, 3) AS wgh_count -- weighted count of tax units (#M)
FROM base
GROUP BY MARS;
.headers off
SELECT
  &#39;A&#39;,                                  -- tax filing status
  ROUND(SUM(s006)*1e-6, 3) AS wgh_count -- weighted count of tax units (#M)
FROM base;
.headers on

.print *** specify base.income_group
UPDATE base SET income_group =
  CASE  -- specify the income_group brackets as desired
    WHEN expanded_income &lt;   0.0   THEN 0
    WHEN expanded_income &lt;  50.0e3 THEN 1
    WHEN expanded_income &lt; 100.0e3 THEN 2
    WHEN expanded_income &lt; 500.0e3 THEN 3
    WHEN expanded_income &lt;   1.0e6 THEN 4
    ELSE                                5
  END;
  
.print *** tabulate weighted tax units and baseline.iitax by income_group:
.width 1 -9 -9 -9 -9
SELECT
  income_group                               AS g,       -- income_group
  ROUND(SUM(s006)*1e-6, 3)                   AS units,   -- tax units (#M)
  ROUND(SUM(s006*b.iitax)*1e-9, 3)           AS b_iitax, -- baseline iitax ($B)
  ROUND(SUM(s006*r.iitax)*1e-9, 3)           AS r_iitax, -- reform iitax ($B)
  ROUND(SUM(s006*(r.iitax-b.iitax))*1e-9, 3) AS r_b_diff -- reform-baseline diff
FROM base JOIN baseline AS b USING(RECID) JOIN reform AS r USING(RECID)
GROUP BY income_group; 
.headers off
SELECT
  &#39;A&#39;                                        AS g,       -- all income groups
  ROUND(SUM(s006)*1e-6, 3)                   AS units,   -- tax units (#M)
  ROUND(SUM(s006*b.iitax)*1e-9, 3)           AS b_iitax, -- baseline iitax ($B)
  ROUND(SUM(s006*r.iitax)*1e-9, 3)           AS r_iitax, -- reform iitax ($B)
  ROUND(SUM(s006*(r.iitax-b.iitax))*1e-9, 3) AS r_b_diff -- reform-baseline diff
FROM base JOIN baseline AS b USING(RECID) JOIN reform AS r USING(RECID);
.headers on
</pre></div>
</div>
<p>Using this <code class="docutils literal notranslate"><span class="pre">tab.sql</span></code> script to tabulate the <code class="docutils literal notranslate"><span class="pre">cps-24-#-ref3-#.db</span></code>
database produces these results in about 1.3 seconds:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">sqlite3</span> <span class="n">cps</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="c1">#-ref3-#.db &lt; tab.sql</span>
<span class="o">***</span> <span class="n">unweighted</span> <span class="ow">and</span> <span class="n">weighted</span> <span class="n">tax</span> <span class="n">unit</span> <span class="n">counts</span><span class="p">:</span>
<span class="n">raw_count</span>  <span class="n">wgh_count</span>
<span class="o">---------</span>  <span class="o">---------</span>
<span class="mi">280005</span>     <span class="mf">214.876</span>  
<span class="o">***</span> <span class="n">weighted</span> <span class="n">tax</span> <span class="n">unit</span> <span class="n">counts</span> <span class="n">by</span> <span class="n">filing</span> <span class="n">status</span> <span class="p">(</span><span class="n">MARS</span><span class="p">):</span>
<span class="n">MARS</span>  <span class="n">wgh_count</span>
<span class="o">----</span>  <span class="o">---------</span>
<span class="mi">1</span>       <span class="mf">120.117</span>
<span class="mi">2</span>        <span class="mf">71.899</span>
<span class="mi">3</span>         <span class="mf">4.191</span>
<span class="mi">4</span>         <span class="mf">18.67</span>
<span class="n">A</span>       <span class="mf">214.876</span>
<span class="o">***</span> <span class="n">specify</span> <span class="n">base</span><span class="o">.</span><span class="n">income_group</span>
<span class="o">***</span> <span class="n">tabulate</span> <span class="n">weighted</span> <span class="n">tax</span> <span class="n">units</span> <span class="ow">and</span> <span class="n">baseline</span><span class="o">.</span><span class="n">iitax</span> <span class="n">by</span> <span class="n">income_group</span><span class="p">:</span>
<span class="n">g</span>      <span class="n">units</span>    <span class="n">b_iitax</span>    <span class="n">r_iitax</span>   <span class="n">r_b_diff</span>
<span class="o">-</span>  <span class="o">---------</span>  <span class="o">---------</span>  <span class="o">---------</span>  <span class="o">---------</span>
<span class="mi">0</span>      <span class="mf">0.105</span>        <span class="mf">0.0</span>        <span class="mf">0.0</span>        <span class="mf">0.0</span>
<span class="mi">1</span>     <span class="mf">88.203</span>      <span class="o">-</span><span class="mf">5.16</span>    <span class="o">-</span><span class="mf">26.722</span>    <span class="o">-</span><span class="mf">21.563</span>
<span class="mi">2</span>     <span class="mf">62.213</span>    <span class="mf">121.065</span>     <span class="mf">52.266</span>    <span class="o">-</span><span class="mf">68.798</span>
<span class="mi">3</span>     <span class="mf">61.721</span>   <span class="mf">1043.226</span>    <span class="mf">823.515</span>   <span class="o">-</span><span class="mf">219.711</span>
<span class="mi">4</span>       <span class="mf">1.85</span>    <span class="mf">261.946</span>    <span class="mf">247.438</span>    <span class="o">-</span><span class="mf">14.508</span>
<span class="mi">5</span>      <span class="mf">0.784</span>    <span class="mf">499.231</span>    <span class="mf">492.709</span>     <span class="o">-</span><span class="mf">6.521</span>
<span class="n">A</span>    <span class="mf">214.876</span>   <span class="mf">1920.308</span>   <span class="mf">1589.207</span>   <span class="o">-</span><span class="mf">331.101</span>
</pre></div>
</div>
<p>Notice the -331.101 aggregate change in income tax liability induced
by the reform is essentially the same as the -331.1 amount in the
–tables output above, although the income subgroups amounts differ
because the income groups are defined in different ways.</p>
</section>
<section id="generate-budget-window-results">
<h2>Generate budget-window results<a class="headerlink" href="#generate-budget-window-results" title="Link to this heading">#</a></h2>
<p>Sometimes ten-year results for a reform are needed.  The easiest way
to generate such budget-window results is to use the CLI tool’s
<code class="docutils literal notranslate"><span class="pre">--numyears</span> <span class="pre">N</span></code> option.  If <code class="docutils literal notranslate"><span class="pre">ext.json</span></code> contains the
extend-TCJA-beyond-2025 reform, then we can execute the following run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">tc</span> <span class="o">--</span><span class="n">version</span>
<span class="n">Tax</span><span class="o">-</span><span class="n">Calculator</span> <span class="mf">4.6.2</span> <span class="n">on</span> <span class="n">Python</span> <span class="mf">3.12</span>

<span class="o">%</span> <span class="n">tc</span> <span class="o">../</span><span class="n">tmd</span><span class="o">.</span><span class="n">csv</span> <span class="mi">2026</span> <span class="o">--</span><span class="n">numyears</span> <span class="mi">10</span> <span class="o">--</span><span class="n">reform</span> <span class="n">ext</span><span class="o">.</span><span class="n">json</span> <span class="o">--</span><span class="n">tables</span>
<span class="n">Read</span> <span class="nb">input</span> <span class="n">data</span> <span class="k">for</span> <span class="mi">2021</span><span class="p">;</span> <span class="nb">input</span> <span class="n">data</span> <span class="n">were</span> <span class="n">extrapolated</span> <span class="n">to</span> <span class="mi">2026</span>
<span class="n">Write</span> <span class="n">tabular</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">tmd</span><span class="o">-</span><span class="mi">26</span><span class="o">-</span><span class="c1">#-ext-#-tables.text</span>
<span class="n">Advance</span> <span class="nb">input</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">policy</span> <span class="n">to</span> <span class="mi">2027</span>
<span class="n">Write</span> <span class="n">tabular</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">tmd</span><span class="o">-</span><span class="mi">27</span><span class="o">-</span><span class="c1">#-ext-#-tables.text</span>
<span class="n">Advance</span> <span class="nb">input</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">policy</span> <span class="n">to</span> <span class="mi">2028</span>
<span class="n">Write</span> <span class="n">tabular</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">tmd</span><span class="o">-</span><span class="mi">28</span><span class="o">-</span><span class="c1">#-ext-#-tables.text</span>
<span class="n">Advance</span> <span class="nb">input</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">policy</span> <span class="n">to</span> <span class="mi">2029</span>
<span class="n">Write</span> <span class="n">tabular</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">tmd</span><span class="o">-</span><span class="mi">29</span><span class="o">-</span><span class="c1">#-ext-#-tables.text</span>
<span class="n">Advance</span> <span class="nb">input</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">policy</span> <span class="n">to</span> <span class="mi">2030</span>
<span class="n">Write</span> <span class="n">tabular</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">tmd</span><span class="o">-</span><span class="mi">30</span><span class="o">-</span><span class="c1">#-ext-#-tables.text</span>
<span class="n">Advance</span> <span class="nb">input</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">policy</span> <span class="n">to</span> <span class="mi">2031</span>
<span class="n">Write</span> <span class="n">tabular</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">tmd</span><span class="o">-</span><span class="mi">31</span><span class="o">-</span><span class="c1">#-ext-#-tables.text</span>
<span class="n">Advance</span> <span class="nb">input</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">policy</span> <span class="n">to</span> <span class="mi">2032</span>
<span class="n">Write</span> <span class="n">tabular</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">tmd</span><span class="o">-</span><span class="mi">32</span><span class="o">-</span><span class="c1">#-ext-#-tables.text</span>
<span class="n">Advance</span> <span class="nb">input</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">policy</span> <span class="n">to</span> <span class="mi">2033</span>
<span class="n">Write</span> <span class="n">tabular</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">tmd</span><span class="o">-</span><span class="mi">33</span><span class="o">-</span><span class="c1">#-ext-#-tables.text</span>
<span class="n">Advance</span> <span class="nb">input</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">policy</span> <span class="n">to</span> <span class="mi">2034</span>
<span class="n">Write</span> <span class="n">tabular</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">tmd</span><span class="o">-</span><span class="mi">34</span><span class="o">-</span><span class="c1">#-ext-#-tables.text</span>
<span class="n">Advance</span> <span class="nb">input</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">policy</span> <span class="n">to</span> <span class="mi">2035</span>
<span class="n">Write</span> <span class="n">tabular</span> <span class="n">output</span> <span class="n">to</span> <span class="n">file</span> <span class="n">tmd</span><span class="o">-</span><span class="mi">35</span><span class="o">-</span><span class="c1">#-ext-#-tables.text</span>
<span class="n">Execution</span> <span class="n">time</span> <span class="ow">is</span> <span class="mf">55.6</span> <span class="n">seconds</span>
</pre></div>
</div>
<p><a class="reference external" href="https://github.com/PSLmodels/Tax-Calculator/pull/2900#issue-3047043290">PR
#2900</a>
discusses how much faster this is relative to executing ten separate
<code class="docutils literal notranslate"><span class="pre">tc</span></code> runs, and also shows how to tabulate the ten-year aggregate
reform result from the files generated by this run.</p>
<p>Because the reform-induced change in aggregate federal income tax
liability is located on the last row of each tables output file in the
fourth column, we can look at the ten-year results quickly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>% tail -1 tmd-??-*tables.text
==&gt; tmd-26-#-ext-#-tables.text &lt;==
 A   192.41   20828.3    -284.0       0.0       0.0    -284.0

==&gt; tmd-27-#-ext-#-tables.text &lt;==
 A   193.77   21613.4    -291.7       0.0       0.0    -291.7

==&gt; tmd-28-#-ext-#-tables.text &lt;==
 A   194.72   22404.7    -299.5       0.0       0.0    -299.5

==&gt; tmd-29-#-ext-#-tables.text &lt;==
 A   195.66   23243.3    -291.8       0.0       0.0    -291.8

==&gt; tmd-30-#-ext-#-tables.text &lt;==
 A   196.58   24115.1    -299.8       0.0       0.0    -299.8

==&gt; tmd-31-#-ext-#-tables.text &lt;==
 A   197.48   25020.0    -307.8       0.0       0.0    -307.8

==&gt; tmd-32-#-ext-#-tables.text &lt;==
 A   198.35   25952.7    -315.7       0.0       0.0    -315.7

==&gt; tmd-33-#-ext-#-tables.text &lt;==
 A   199.21   26905.4    -323.6       0.0       0.0    -323.6

==&gt; tmd-34-#-ext-#-tables.text &lt;==
 A   200.03   27878.9    -331.6       0.0       0.0    -331.6

==&gt; tmd-35-#-ext-#-tables.text &lt;==
 A   200.83   28883.0    -339.6       0.0       0.0    -339.6
</pre></div>
</div>
<p>A simple way to sum up the ten annual changes is to use the <a class="reference external" href="https://www.gnu.org/software/gawk/manual/gawk.html"><code class="docutils literal notranslate"><span class="pre">awk</span></code>
program</a>, which
could be called <code class="docutils literal notranslate"><span class="pre">gawk</span></code> or <code class="docutils literal notranslate"><span class="pre">gawk.exe</span></code> on your computer, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>% tail -1 tmd-??-*tables.text | awk &#39;$1~/A/{n++;c+=$4}END{print n,c}&#39;
10 -3085.1
</pre></div>
</div>
<p>More examples of analyzing different versions of the TCJA after 2025
are available in this
<a class="reference external" href="https://taxcalc.pslmodels.org/usage/tcja_after_2025.html">document</a>.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./guide"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="python_interface.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Python interface</p>
      </div>
    </a>
    <a class="right-next"
       href="policy_params.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Policy parameters</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-tc-cli">Test <code class="docutils literal notranslate"><span class="pre">tc</span></code> CLI</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specify-tax-reform">Specify tax reform</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specify-analysis-assumptions">Specify analysis assumptions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specify-filing-units">Specify filing units</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initiate-reform-analysis">Initiate reform analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tabulate-reform-results">Tabulate reform results</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-budget-window-results">Generate budget-window results</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Policy Simulation Library
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>